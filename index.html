<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petok Predict - Kalkulator Perhitungan Ayam Profesional</title>
    <meta name="description" content="Petok Predict: Sistem kalkulasi perhitungan ayam untuk analisis keuntungan peternakan dengan data harga real-time">
    <meta name="keywords" content="petok predict, kalkulator ayam, perhitungan ayam, peternakan, analisis keuntungan, broiler, ayam kampung">
    <meta name="author" content="Petok Predict">
    <link rel="canonical" href="https://petokpredict.me/">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Petok Predict - Kalkulator Perhitungan Ayam Profesional">
    <meta property="og:description" content="Sistem kalkulasi perhitungan ayam profesional dengan analisis keuntungan real-time">
    <meta property="og:image" content="https://petokpredict.me/petokpredict.png">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://petokpredict.me/">
    <meta property="og:site_name" content="Petok Predict">
    
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Petok Predict - Kalkulator Perhitungan Ayam Profesional">
    <meta name="twitter:description" content="Hitung potensi profit peternakan ayam dengan data harga real-time. Gratis dan cepat.">
    <meta name="twitter:image" content="https://petokpredict.me/petokpredict.png">
    
    <!-- Language -->
    <link rel="alternate" hreflang="id" href="https://petokpredict.me/">
    <link rel="alternate" hreflang="x-default" href="https://petokpredict.me/">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <meta name="theme-color" content="#f3f8ec">
    <link rel="manifest" href="manifest.json">
    <!-- Dynamic SVG Favicon -->
    <link rel="icon" href="pp.svg" type="image/svg+xml">
    
    <!-- External Libraries -->
    <!-- Libraries loaded dynamically: Chart.js, hCaptcha, Supabase, Google GSI -->
    
        <!-- Structured Data -->
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Petok Predict",
            "url": "https://petokpredict.me/",
            "logo": "https://petokpredict.me/petokpredict.png"
        }
        </script>
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": "Petok Predict",
            "url": "https://petokpredict.me/",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://petokpredict.me/?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "FAQPage",
            "mainEntity": [
                {
                    "@type": "Question",
                    "name": "Apa itu Petok Predict?",
                    "acceptedAnswer": {"@type": "Answer", "text": "Kalkulator perhitungan ayam profesional untuk membantu peternak menghitung biaya, pendapatan, dan profit berdasarkan asumsi produksi dan data harga real-time."}
                },
                {
                    "@type": "Question",
                    "name": "Apakah gratis digunakan?",
                    "acceptedAnswer": {"@type": "Answer", "text": "Ya, kalkulator dapat digunakan gratis. Login opsional untuk menyimpan riwayat dan profil."}
                },
                {
                    "@type": "Question",
                    "name": "Bagaimana jika sedang offline?",
                    "acceptedAnswer": {"@type": "Answer", "text": "Jika harga pasar tidak tersedia (offline), bagian simulasi menampilkan tanda — dan tidak menggunakan angka fallback, untuk menjaga akurasi."}
                }
            ]
        }
        </script>
</head>
<body>
    <!-- Global Navbar -->
    <nav class="top-nav" role="navigation" aria-label="Navbar utama">
        <div class="top-nav__inner">
            <div class="top-nav__left">
                <img src="pp.svg" alt="PetokPredict Logo" class="logo" width="40" height="40">
                <span class="app-name">Petok Predict</span>
            </div>
            <div class="top-nav__right">
                <div id="login-btn" class="google-signin-container"></div>
                <div id="user-box" class="user-box" style="display: none;">
                    <img id="user-avatar" class="user-avatar profile-trigger" alt="Foto Profil" style="display: none;" role="button" tabindex="0">
                    <button id="logout-btn" class="icon-btn logout-btn" aria-label="Keluar">
                        <svg xmlns="http://www.w3.org/2000/svg" class="simple-icon" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="page-shell">

        <main class="main-content">
            <!-- Dashboard Kalkulasi -->
            <section class="dashboard">
                                <div class="dash-header">
                    <div style="flex: 1; min-width: 280px; max-width: 700px;">
                        <h2 style="display:inline-flex;align-items:center">
                            Rangkuman Usaha Ayam Kamu 
                            <span class="info-icon" data-tooltip="Panel ringkas untuk membaca performa kandang. Semua biaya rutin (vaksin, listrik, dll) disesuaikan real-time dengan data kandangmu.">?</span>
                        </h2>
                        <p class="helper-text" style="margin-top: 4px; line-height: 1.5;">
                            <span id="saveInfo" class="helper-success">
                                • Simpan kalkulasi ke riwayat kapan pun butuh bahan diskusi.
                            </span>
                        </p>
                    </div>
                    <div class="dash-actions">
                        <button id="saveCalculation" class="btn-action accent">
                            <svg xmlns="http://www.w3.org/2000/svg" class="simple-icon" viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg> Simpan Kalkulasi
                        </button>
                        <button id="viewHistory" class="btn-action">
                            <svg xmlns="http://www.w3.org/2000/svg" class="simple-icon" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 8 12 12 15 13"></polyline>
                            </svg> History
                        </button>
                        <button id="exportPdfDashboard" class="btn-action ghost">
                            <svg xmlns="http://www.w3.org/2000/svg" class="simple-icon" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg> Export PDF
                        </button>
                    </div>
                </div>

                <div class="dash-controls">
                    <div class="input-group">
                        <label for="chickenType">Jenis Ayam</label>
                        <div class="tab-buttons mobile-scroll" id="chickenTabs">
                            <button type="button" class="tab-btn active" data-type="kampung">Ayam Kampung</button>
                            <button type="button" class="tab-btn" data-type="broiler">Broiler</button>
                        </div>
                        <select id="chickenType" hidden>
                            <option value="kampung">Ayam Kampung</option>
                            <option value="broiler">Broiler</option>
                        </select>
                    </div>
                </div>

                <!-- Market Info Group -->
                <div class="card-group single">
                    <div class="stat-card info">
                        <div class="stat-row">
                            <p class="stat-title">Harga Pasar</p>
                            <div class="inline-actions">
                                <button id="btnEditMarket" class="chip-link" type="button"><svg xmlns="http://www.w3.org/2000/svg" class="simple-icon" style="width:14px;height:14px;" viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> Edit</button>
                            </div>
                        </div>
                        <p class="stat-value" id="statJenis">Ayam Kampung</p>
                        <p class="stat-value" id="statHarga">Loading...</p>
                        <div id="marketEditRow" class="edit-row" style="display:none">
                            <label for="inputMarketPrice">Harga kustom (Rp/kg)</label>
                            <div class="edit-inline">
                                <input type="number" id="inputMarketPrice" min="0" step="100" placeholder="cth 35000" />
                                <button id="btnApplyMarket" class="btn-action accent" type="button">Simpan</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Financial Overview (Unified Chart) -->
                <div class="financial-overview">
                    <div class="financial-card">
                        <div class="chart-section">
                            <div class="chart-wrapper">
                                <canvas id="financialChart"></canvas>
                                <div class="chart-center-label">
                                    <span class="label">Pendapatan</span>
                                    <span class="value" id="centerRevenue">Rp 0</span>
                                </div>
                            </div>
                        </div>
                        <div class="details-section">
                            <div class="detail-item profit">
                                <div class="detail-head">
                                    <span class="dot" style="background:#3F8F5F"></span>
                                    <span class="label">Keuntungan Bersih</span>
                                </div>
                                <span class="value" id="detailProfit">Rp 0</span>
                            </div>
                            <div class="detail-item feed">
                                <div class="detail-head">
                                    <span class="dot" style="background:#E08A3D"></span>
                                    <span class="label">Biaya Pakan</span>
                                </div>
                                <span class="value" id="detailFeed">Rp 0</span>
                            </div>
                            <div class="detail-item doc">
                                <div class="detail-head">
                                    <span class="dot" style="background:#D4A373"></span>
                                    <span class="label">Biaya DOC</span>
                                </div>
                                <span class="value" id="detailDOC">Rp 0</span>
                            </div>
                            <div class="detail-item other">
                                <div class="detail-head">
                                    <span class="dot" style="background:#89AD92"></span>
                                    <span class="label">Biaya Lainnya</span>
                                </div>
                                <span class="value" id="detailOther">Rp 0</span>
                            </div>
                            <div class="detail-divider"></div>
                            <div class="detail-item total">
                                <span class="label">Total Biaya</span>
                                <span class="value" id="detailTotalCost">Rp 0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Key Metrics Row -->
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <span class="label">Ekor Panen</span>
                            <span class="value" id="statEkorPanen">–</span>
                        </div>
                        <div class="metric-card">
                            <span class="label">Umur Panen</span>
                            <span class="value" id="statHarvestEstimate">–</span>
                        </div>
                        <div class="metric-card">
                            <span class="label">FCR Aktual</span>
                            <span class="value" id="statFCRDisplay">–</span>
                        </div>
                    </div>
                </div>

                <div class="card-group" id="advancedStats" style="display:none">
                    <div class="stat-card info">
                        <div class="stat-row">
                            <p class="stat-title">Biaya / kg Hidup</p>
                            <span class="info-icon" data-tooltip="Total biaya dibagi total bobot panen. Semakin rendah semakin efisien.">?</span>
                        </div>
                        <p class="stat-value" id="statCostPerKg">–</p>
                    </div>
                    <div class="stat-card info">
                        <div class="stat-row">
                            <p class="stat-title">Break-even Price</p>
                            <span class="info-icon" data-tooltip="Harga jual minimum yang diperlukan agar tidak rugi (impas).">?</span>
                        </div>
                        <p class="stat-value" id="statBreakEven">–</p>
                    </div>
                    <div class="stat-card info">
                        <div class="stat-row">
                            <p class="stat-title">EPEF</p>
                            <span class="info-icon" data-tooltip="European Production Efficiency Factor. Indikator standar efisiensi performa ayam pedaging.">?</span>
                        </div>
                        <p class="stat-value" id="statEpef">–</p>
                    </div>
                </div>

            </section>

            <!-- Card: Asumsi Produksi (Sliders) -->
            <section class="dashboard">
                <div class="dash-header">
                    <div>
                        <h2 id="secondaryCardTitle" style="display:inline-flex;align-items:center">
                            Asumsi Produksi
                            <span class="info-icon" data-tooltip="Geser slider untuk menyesuaikan parameter. Rangkuman biaya & keuntungan akan ter-update otomatis.">?</span>
                        </h2>
                    </div>
                </div>
                <div class="tabs">
                    <div class="tab-buttons mobile-scroll">
                        <button class="tab-btn active" data-tab="asumsi" id="tabAsumsi">Asumsi Produksi</button>
                        <button class="tab-btn" data-tab="simulasi" id="tabSimulasi">Simulasi Skenario</button>
                    </div>
                    <div class="tab-content active" id="tabAsumsiContent">
                      <div class="form-grid">
                    <div class="input-group">
                        <div class="slider-header"><label for="rangePopulasi">Populasi</label><span class="slider-value" id="valPopulasi">100</span></div>
                        <div class="slider-wrap">
                            <input type="range" id="rangePopulasi" min="50" max="1000" step="10" value="100" />
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="slider-header"><label for="rangeSurvival">Survival (%)</label><span class="slider-value" id="valSurvival">95</span></div>
                        <div class="slider-wrap">
                            <input type="range" id="rangeSurvival" min="70" max="100" step="1" value="95" />
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="slider-header"><label for="rangeBobot">Bobot Panen (kg)</label><span class="slider-value" id="valBobot">1.00</span></div>
                        <div class="slider-wrap">
                            <input type="range" id="rangeBobot" min="0.8" max="1.4" step="0.02" value="1.00" />
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="slider-header"><label for="rangeHargaPakan">Harga Pakan/sak 50kg</label><span class="slider-value" id="valHargaPakan">Rp 400.000</span></div>
                        <div class="slider-wrap">
                            <input type="range" id="rangeHargaPakan" min="300000" max="650000" step="5000" value="400000" />
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="slider-header"><label for="rangeFCR">FCR</label><span class="slider-value" id="valFCR">2.30</span></div>
                        <div class="slider-wrap">
                            <input type="range" id="rangeFCR" min="1.6" max="3.0" step="0.05" value="2.30" />
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="slider-header">
                            <label for="rangeDocPrice">DOC/Ekor (Rp) <span class="info-icon" data-tooltip="Harga beli bibit anak ayam (Day Old Chicken) per ekor.">?</span></label>
                            <span class="slider-value" id="valDocPrice">Rp 8.000</span>
                        </div>
                        <div class="slider-wrap">
                            <input type="range" id="rangeDocPrice" min="5000" max="15000" step="250" value="8000" />
                        </div>
                    </div>
                      </div>

                                            <div class="advanced-toggle-row" id="advancedToggleRow">
                                                <div class="advanced-toggle-copy">
                                                        <label for="advancedModeSwitch" style="display:flex;align-items:center">
                                                            Mode Advance 
                                                            <span class="info-icon" data-tooltip="Aktifkan untuk membuka parameter lanjutan (umur panen, wastage, dll) dan fitur rekomendasi AI.">?</span>
                                                        </label>
                                                </div>
                                                <button type="button" id="advancedModeSwitch" class="toggle-switch" aria-pressed="false" aria-label="Toggle mode advance">
                                                        <span class="toggle-switch-thumb"></span>
                                                </button>
                                            </div>

                      <div id="advancedBanner" class="advanced-banner" style="display:none">
                        Mode advance aktif. Parameter lanjutan tersedia di bawah untuk penyesuaian detail biaya.
                      </div>
                      <div id="advancedControls" class="form-grid advanced-grid" style="display:none">
                        <div style="grid-column: 1 / -1; display:flex; gap:12px; flex-wrap:wrap">
                            <button id="openAdvancedConfigurator" class="btn-action ghost" style="flex:1;justify-content:center;min-width:200px">
                                <svg xmlns="http://www.w3.org/2000/svg" class="simple-icon" viewBox="0 0 24 24"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg> Konfigurasi Kandang
                            </button>
                            <button id="regenAdvice" class="btn-action ghost" style="flex:1;justify-content:center;min-width:200px">
                                <svg xmlns="http://www.w3.org/2000/svg" class="simple-icon" viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg> Regenerasi Rekomendasi AI
                            </button>
                        </div>
                        <div class="input-group">
                            <label style="display:flex;align-items:center">
                                Basis Harga Pasar
                                <span class="info-icon" data-tooltip="Live: harga per kg bobot hidup. Karkas: harga daging bersih (butuh input dressing % & biaya proses).">?</span>
                            </label>
                            <div class="basis-switch" id="basisSwitch">
                                <button type="button" class="basis-btn active" data-basis="live">Live Bird</button>
                                <button type="button" class="basis-btn" data-basis="carcass">Karkas</button>
                            </div>
                        </div>
                        <div class="input-group advanced-only" data-basis="carcass" style="display:none">
                            <div class="slider-header"><label for="rangeDressing">Dressing Yield (%)</label><span class="slider-value" id="valDressing">72</span></div>
                            <div class="slider-wrap">
                                <input type="range" id="rangeDressing" min="55" max="85" step="1" value="72" />
                            </div>
                        </div>
                        <div class="input-group advanced-only" data-basis="carcass" style="display:none">
                            <div class="slider-header"><label for="rangeProcessCost">Biaya Proses/Ekor (Rp)</label><span class="slider-value" id="valProcessCost">Rp 1.500</span></div>
                            <div class="slider-wrap">
                                <input type="range" id="rangeProcessCost" min="0" max="6000" step="100" value="1500" />
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="slider-header"><label for="rangeHarvestAge">Umur Panen (hari)</label><span class="slider-value" id="valHarvestAge">35</span></div>
                            <div class="slider-wrap">
                                <input type="range" id="rangeHarvestAge" min="20" max="120" step="1" value="35" />
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="slider-header"><label for="rangeWastage">Wastage Pakan (%)</label><span class="slider-value" id="valWastage">3.0%</span></div>
                            <div class="slider-wrap">
                                <input type="range" id="rangeWastage" min="0" max="15" step="0.5" value="3" />
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="slider-header"><label for="rangeShrinkage">Shrinkage Transport (%)</label><span class="slider-value" id="valShrinkage">2.0%</span></div>
                            <div class="slider-wrap">
                                <input type="range" id="rangeShrinkage" min="0" max="10" step="0.5" value="2" />
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="slider-header"><label for="rangeLaborCost">Tenaga Kerja / Siklus</label><span class="slider-value" id="valLaborCost">Rp 300.000</span></div>
                            <div class="slider-wrap">
                                <input type="range" id="rangeLaborCost" min="0" max="5000000" step="50000" value="300000" />
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="slider-header"><label for="rangeOverheadCost">Overhead / Siklus</label><span class="slider-value" id="valOverheadCost">Rp 200.000</span></div>
                            <div class="slider-wrap">
                                <input type="range" id="rangeOverheadCost" min="0" max="5000000" step="50000" value="200000" />
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="slider-header"><label for="rangeTransportCost">Transport & Komisi</label><span class="slider-value" id="valTransportCost">Rp 150.000</span></div>
                            <div class="slider-wrap">
                                <input type="range" id="rangeTransportCost" min="0" max="3000000" step="50000" value="150000" />
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="slider-header"><label for="rangeHeatingCost">Biaya Pemanas & Listrik</label><span class="slider-value" id="valHeatingCost">Rp 0</span></div>
                            <div class="slider-wrap">
                                <input type="range" id="rangeHeatingCost" min="0" max="5000000" step="50000" value="0" />
                            </div>
                            <small id="heatingHint">Angka awal mengikuti rekomendasi sistem.</small>
                        </div>
                        <div class="input-group">
                            <div class="slider-header"><label for="rangeVaccineCost">Biaya Vaksin & Obat</label><span class="slider-value" id="valVaccineCost">Rp 100.000</span></div>
                            <div class="slider-wrap">
                                <input type="range" id="rangeVaccineCost" min="0" max="3000000" step="25000" value="100000" />
                            </div>
                        </div>
                      </div>
                    </div>
                    <div class="tab-content" id="tabSimulasiContent">
                        <div id="simCards" class="sim-grid"></div>
                    </div>
                </div>
            </section>

            <!-- Loading Indicator -->
            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Mengambil data harga terbaru...</p>
            </div>
        </main>

        <footer class="site-footer">
            <div class="footer-content">
                <div>
                    <p class="footer-title">Tetap pegang kendali atas kandangmu.</p>
                    <p class="footer-copy">&copy; 2025 Petok Predict. Data harga bersumber dari partner terpercaya dan diperbarui berkala.</p>
                </div>
            </div>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>